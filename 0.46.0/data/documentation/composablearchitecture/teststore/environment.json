{"deprecationSummary":[{"type":"paragraph","inlineContent":[{"text":"\n      'Reducer' and `Environment` have been deprecated in favor of 'ReducerProtocol' and 'DependencyValues'.\n\n      See the migration guide for more information: https:\/\/pointfreeco.github.io\/swift-composable-architecture\/main\/documentation\/composablearchitecture\/reducerprotocol\n      ","type":"text"}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore\/environment"},"metadata":{"externalID":"s:22ComposableArchitecture9TestStoreC11environmentq2_vp","role":"symbol","roleHeading":"Instance Property","modules":[{"name":"ComposableArchitecture"}],"title":"environment","platforms":[],"symbolKind":"property","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"environment"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"Environment"}]},"variants":[{"paths":["\/documentation\/composablearchitecture\/teststore\/environment"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"type":"text","text":"The current environment."}],"kind":"symbol","hierarchy":{"paths":[["doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture","doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore","doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStoreDeprecations"]]},"sections":[],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"text":"environment","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Environment","kind":"typeIdentifier"},{"text":" { ","kind":"text"},{"text":"get","kind":"keyword"},{"text":" ","kind":"text"},{"text":"set","kind":"keyword"},{"kind":"text","text":" }"}]}]},{"content":[{"text":"Discussion","level":2,"type":"heading","anchor":"discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The environment can be modified throughout a test store’s lifecycle in order to influence"},{"type":"text","text":" "},{"type":"text","text":"how it produces effects. This can be handy for testing flows that require a dependency to"},{"type":"text","text":" "},{"type":"text","text":"start in a failing state and then later change into a succeeding state:"}]},{"syntax":"swift","code":["\/\/ Start dependency endpoint in a failing state","store.environment.client.fetch = { _ in throw FetchError() }","await store.send(.buttonTapped)","await store.receive(.response(.failure(FetchError())) {","  …","}","","\/\/ Change dependency endpoint into a succeeding state","await store.environment.client.fetch = { \"Hello \\($0)!\" }","await store.send(.buttonTapped)","await store.receive(.response(.success(\"Hello Blob!\"))) {","  …","}"],"type":"codeListing"}],"kind":"content"}],"references":{"doc://ComposableArchitecture/documentation/ComposableArchitecture/TestStoreDeprecations":{"abstract":[{"text":"Review unsupported test store APIs and their replacements.","type":"text"}],"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStoreDeprecations","role":"collectionGroup","kind":"article","title":"Deprecations","url":"\/documentation\/composablearchitecture\/teststoredeprecations","type":"topic"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/TestStore":{"type":"topic","kind":"symbol","role":"symbol","title":"TestStore","navigatorTitle":[{"kind":"identifier","text":"TestStore"}],"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"TestStore","kind":"identifier"}],"url":"\/documentation\/composablearchitecture\/teststore","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore","abstract":[{"type":"text","text":"A testable runtime for a reducer."}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/TestStore/environment":{"abstract":[{"type":"text","text":"The current environment."}],"role":"symbol","deprecated":true,"kind":"symbol","title":"environment","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"text":"environment","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Environment","kind":"typeIdentifier"}],"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore\/environment","url":"\/documentation\/composablearchitecture\/teststore\/environment","type":"topic"},"doc://ComposableArchitecture/documentation/ComposableArchitecture":{"title":"ComposableArchitecture","type":"topic","role":"collection","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture","url":"\/documentation\/composablearchitecture","abstract":[{"type":"text","text":"The Composable Architecture (TCA, for short) is a library for building applications in a consistent"},{"text":" ","type":"text"},{"type":"text","text":"and understandable way, with composition, testing, and ergonomics in mind. It can be used in"},{"type":"text","text":" "},{"text":"SwiftUI, UIKit, and more, and on any Apple platform (iOS, macOS, tvOS, and watchOS).","type":"text"}],"kind":"symbol"}}}